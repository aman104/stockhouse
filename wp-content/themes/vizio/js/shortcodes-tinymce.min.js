(function(){"use strict";var e=jQuery,t=e.parseJSON(sp_theme.shortcodes_module);tinymce.create("tinymce.plugins.sp_shortcodes",{init:function(n){n.addCommand("spOpenDialog",function(n,r){e(".shortcodes-module-container").each(function(){e(this).dialog("close")});var i={action:"sp_shortcode_input_form_ajax",ajaxCustomNonce:sp_theme.ajaxCustomNonce,module:r.id},s,o=[],u=[];e.post(sp_theme.ajaxurl,i,function(n){n=e.parseJSON(n);s=e('<div class="shortcodes-module-container" data-id="'+r.id+'">'+n.form+'<button class="button button-primary add-shortcode">'+sp_theme.shortcodes_add_shortcode_button_text+'</button><button class="toggle-options button">'+sp_theme.shortcodes_more_options_button_text+"</button></div>");e(s).find("div.optional").length?e(s).find(".toggle-options").show():e(s).find(".toggle-options").hide();e("body").append(s);s.hide();e(".shortcodes-module-container").dialog({title:r.title,width:600,height:600,dialogClass:"shortcode-modules-dialog",close:function(){s.remove();e(".mfp-wrap.page-builder-modal").show()},open:function(){e(".shortcodes-module-container").scrollTop(0);e(".mfp-wrap.page-builder-modal").hide()}}).dialog("open");e("input[type=text], textarea, select",s).not('textarea[name="inner_wrap_content"]').each(function(){o.push(e(this).val())});e("input[type=radio]:checked",s).each(function(){u.push(e(this).val())});e(".shortcodes-module-container").on("click",".add-shortcode",function(n){n.preventDefault();var i=e(this).parents(".shortcodes-module-container"),s;s="["+t[r.id].shortcode_name;e("input[type=text], textarea, select",i).not('textarea[name="inner_wrap_content"]').each(function(t){e(this).val()!==o[t]&&(s+=" "+e(this).data("set-name")+'="'+e(this).val()+'"')});e("input[type=radio]:checked",i).each(function(t){e(this).val()!==u[t]&&(s+=" "+e(this).data("set-name")+'="'+e(this).val()+'"')});s+="]";r.id==="tabs"&&(s+=sp_theme.shortcodes_tinymce_shortcode_tab_content_msg+"[/"+t[r.id].shortcode_name+"]");r.id==="tab_content"&&(s+=sp_theme.shortcodes_tinymce_shortcode_content_msg+"[/"+t[r.id].shortcode_name+"]");r.id==="accordion"&&(s+="[sp-accordion-content]"+sp_theme.shortcodes_tinymce_shortcode_content_msg+"[/sp-accordion-content][/"+t[r.id].shortcode_name+"]");e('textarea[name="inner_wrap_content"]',i).length&&e('textarea[name="inner_wrap_content"]',i).val().length>0&&(s+=e('textarea[name="inner_wrap_content"]',i).val()+"[/"+t[r.id].shortcode_name+"]");window.tinyMCE.activeEditor.execCommand("mceInsertContent",!1,s);e(".shortcodes-module-container").dialog("close")});e(".shortcodes-module-container").on("click",".toggle-options",function(t){t.preventDefault();var n=e(this),r=e(this).parents(".shortcodes-module-container");r.find("div.optional").slideToggle(300);n.text(function(e,t){return t===sp_theme.shortcodes_more_options_button_text?sp_theme.shortcodes_less_options_button_text:sp_theme.shortcodes_more_options_button_text})})})})},createControl:function(e,n){if(e==="sp_shortcodes"){var r=this;e=n.createMenuButton("sp_shortcodes_button",{title:sp_theme.shortcodes_tinymce_title,image:sp_theme.shortcodes_tinymce_icon,icons:!1});e.onRenderMenu.add(function(e,n){e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_social_media});r.addImmediate(e,t.social_media_fb.title,t.social_media_fb.shortcode,"social_media_fb");r.addImmediate(e,t.social_media_gplusone.title,t.social_media_gplusone.shortcode,"social_media_gplusone");r.addImmediate(e,t.social_media_tweet.title,t.social_media_tweet.shortcode,"social_media_tweet");r.addImmediate(e,t.social_media_twitter_follow.title,t.social_media_twitter_follow.shortcode,"social_media_twitter_follow");r.addImmediate(e,t.social_media_pinit.title,t.social_media_pinit.shortcode,"social_media_pinit");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_products});r.addImmediate(e,t.product_slider.title,t.product_slider.shortcode,"product_slider");r.addImmediate(n,t.tabs.title,t.tabs.shortcode,"tabs");r.addImmediate(n,t.tab_content.title,t.tab_content.shortcode,"tab_content");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_sliders});r.addImmediate(e,t.carousel_slider.title,t.carousel_slider.shortcode,"carousel_slider");r.addImmediate(e,t.layer_slider.title,t.layer_slider.shortcode,"layer_slider");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_boxes});r.addImmediate(e,t.callout.title,t.callout.shortcode,"callout");r.addImmediate(e,t.imagelinkbox.title,t.imagelinkbox.shortcode,"imagelinkbox");r.addImmediate(e,t.lightbox.title,t.lightbox.shortcode,"lightbox");r.addImmediate(n,t.accordion.title,t.accordion.shortcode,"accordion");r.addImmediate(n,t.accordion_content.title,t.accordion_content.shortcode,"accordion_content");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_formatting});r.addImmediate(e,t.grid.title,t.grid.shortcode,"grid");r.addImmediate(e,t.hr.title,t.hr.shortcode,"hr");r.addImmediate(e,t.dropcap.title,t.dropcap.shortcode,"dropcap");r.addImmediate(e,t.blockquote.title,t.blockquote.shortcode,"blockquote");r.addImmediate(e,t.code.title,t.code.shortcode,"code");r.addImmediate(n,t.btt.title,t.btt.shortcode,"btt");r.addImmediate(n,t.image_link.title,t.image_link.shortcode,"image_link");r.addImmediate(n,t.tooltip.title,t.tooltip.shortcode,"tooltip");r.addImmediate(n,t.map.title,t.map.shortcode,"map");r.addImmediate(n,t.check_login.title,t.check_login.shortcode,"check_login");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_forms});r.addImmediate(e,t.login.title,t.login.shortcode,"login");r.addImmediate(e,t.register.title,t.register.shortcode,"register");r.addImmediate(e,t.change_password.title,t.change_password.shortcode,"change_password");r.addImmediate(e,t.contactform.title,t.contactform.shortcode,"contactform");r.addImmediate(n,t.button.title,t.button.shortcode,"button");r.addImmediate(n,t.portfolio.title,t.portfolio.shortcode,"portfolio");r.addImmediate(n,t.bio_card.title,t.bio_card.shortcode,"bio_card");r.addImmediate(n,t.testimonial.title,t.testimonial.shortcode,"testimonial");r.addImmediate(n,t.faq.title,t.faq.shortcode,"faq");e=n.addMenu({title:sp_theme.shortcodes_tinymce_section_paths});r.addImmediate(e,t.homeurl.title,t.homeurl.shortcode,"homeurl");r.addImmediate(e,t.themeurl.title,t.themeurl.shortcode,"themeurl");r.addImmediate(e,t.themepath.title,t.themepath.shortcode,"themepath")});return e}},addImmediate:function(e,t,n,r){e.add({title:t,onclick:function(){tinyMCE.activeEditor.execCommand("spOpenDialog",!1,{title:t,identifier:n,id:r})}})},getInfo:function(){return{longname:"Splashing Pixels Shortcodes",author:"Splashing Pixels (Roy Ho)",authorurl:"http://splashingpixels.com",infourl:"http://splashingpixels.com",version:"1.0"}}});tinymce.PluginManager.add("sp_shortcodes",tinymce.plugins.sp_shortcodes)})();